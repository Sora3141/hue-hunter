:root {
    --bg-color: #0d0d0d;
    --accent-color: #00f2ff;
    --text-color: #ffffff;
    --top-ad-height: 60px;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
    margin: 0; padding: 0;
    background-color: var(--bg-color);
    color: var(--text-color);
    font-family: 'Hiragino Kaku Gothic ProN', sans-serif;
    display: flex; flex-direction: column;
    height: 100dvh; overflow: hidden;
}

#top-fixed-ad {
    width: 100%; height: var(--top-ad-height);
    background-color: #000;
    display: flex; justify-content: center; align-items: center;
    flex-shrink: 0; z-index: 1100;
}

#main-container {
    flex: 1; width: 100%; position: relative;
    display: flex; flex-direction: column; align-items: center;
}

.header { width: 100%; text-align: center; margin-top: 10px; }
#score-display { margin: 0; font-size: 2.8rem; font-weight: 900; text-shadow: 0 0 20px rgba(0, 242, 255, 0.5); }
.score-label { font-size: 0.7rem; letter-spacing: 0.2rem; color: var(--accent-color); }

#game-board {
    display: grid; grid-template-columns: repeat(5, 1fr); grid-template-rows: repeat(5, 1fr);
    gap: 8px; padding: 10px; width: 82vw; max-width: 360px;
    height: auto; aspect-ratio: 1 / 1; margin: 15px auto;
}

/* ★アニメーション演出を復活★ */
.block { 
    width: 100%; height: 100%; border-radius: 8px; cursor: pointer;
    transition: transform 0.1s;
    animation: fadeIn 0.4s ease-out backwards; /* 演出用 */
}

@keyframes fadeIn {
    from { 
        opacity: 0; 
        transform: translateY(10px) scale(0.9); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
    }
}

.block:active { transform: scale(0.92); }
.correct-answer { transform: scale(1.15); z-index: 5; }

/* 画面共通レイアウト */
#start-screen, #result-overlay {
    position: absolute; top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: var(--bg-color);
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    padding: 20px; text-align: center; overflow-y: auto;
}

#start-screen { z-index: 1000; }
#result-overlay {
    z-index: 2000;
    display: none;
    background-color: rgba(13, 13, 13, 0.98);
    opacity: 0;
    transition: opacity 0.3s;
}
#result-overlay.visible { display: flex !important; opacity: 1; }

#auth-ui, #setup-ui, #login-options, .btn-group {
    display: flex; flex-direction: column; align-items: center; gap: 15px; width: 100%;
}

.game-title {
    font-size: 3.5rem; line-height: 0.9; margin-bottom: 30px;
    background: linear-gradient(135deg, #fff 0%, var(--accent-color) 100%);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}

#display-name {
    padding: 16px; border-radius: 30px; border: 1px solid var(--accent-color);
    background: rgba(255, 255, 255, 0.05); color: white;
    text-align: center; width: 240px; font-size: 1rem;
}

.btn-start, .btn-look, .btn-restart, .btn-sync-notice {
    padding: 16px; border-radius: 30px; border: none;
    font-size: 1rem; font-weight: bold; width: 240px; cursor: pointer;
}
.btn-start, .btn-restart { background: var(--accent-color); color: #000; }
.btn-look { background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.2); }
.auth-notice { font-size: 0.7rem; color: #888; width: 240px; margin-top: 5px; }

#ad-space { width: 100%; min-height: 250px; display: flex; justify-content: center; align-items: center; margin: 10px 0; }
#ranking-container { width: 280px; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 15px; }
.rank-name { font-size: 2rem; font-weight: 900; }
.result-stats { display: flex; gap: 25px; margin: 15px 0; }
.stat-value { font-size: 1.6rem; font-weight: bold; }

#back-to-result {
    position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
    padding: 12px 24px; border-radius: 30px; background: var(--accent-color);
    z-index: 3000; border: none; font-weight: bold; display: none;
}
#back-to-result.visible { display: block !important; }
.fade-out { opacity: 0.2; transform: scale(0.9); transition: 0.5s; }